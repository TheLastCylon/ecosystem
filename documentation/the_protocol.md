# The protocol

Ecosystem's protocol is pure JSON, there are a couple of things that have to be standardised but nothing major.
The request and response DTOs are declared in `data_transfer_objecst/json_protocol.py`, and yes, they are exactly as simple as they appear.

As a user, it's unlikely that you'll have to deal with this directly, but what follows is good to know when it comes to debugging your applications.

## The request

As you'll note upon inspecting the code, a request has three fields.
1. `uid`
   1. This is a UUID generated by the client right before transmitting the request to a server.
   2. Ecosystem will strive to use this UUID in any responses to a request. It even uses this UUID when queueing requests. This way, communication can be tracked through an entire system. If one is a bit astute about it, you can pass this same UUID through an infinite number of components, and track an entire communications cycle with it.
2. `router_key`
   1. This is the identifier used by Ecosystem, to route a request to your custom code. This is equivalent to what some would call an "endpoint" in other frameworks. It can be basically any string you can type on a keyboard, as long as it's unique within your application and is allowed to act as a Python dictionary key, it will be valid.
3. `data`
   1. This has a data type of Any, it can really be any valid JSON, and is used to contain the data you need to send to the handler that is going to deal with your request.

The JSON string for a request could literally look like this:
```json
{
  "uid"      : "d4aee3f9-cad6-4711-af57-6952054df475",
  "route_key": "some_string",
  "data"     : {}
}
```
Given that you created a handler with a routing key of `some_string` and made the request data an empty dictionary.

## The response
Here too there are only three fields
1. uid
   1. When you have effected a request, this field in the response should be populated with the UUID of your request.
2. status
   1. This is an integer reflecting the status of your request. A value of 0 will always indicate success. The exact meanings for other values are in a state of flux right now, for the latest take a look at `request/status.py`.
3. data
   1. This will contain the response data, it could be any valid JSON.

The JSON string for a response could look like this:
```json
{
  "uid"   : "d4aee3f9-cad6-4711-af57-6952054df475",
  "status": 0,
  "data"  : {}
}
```